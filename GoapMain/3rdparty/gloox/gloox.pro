TARGET = gloox
QT       -= core gui

TEMPLATE = lib
CONFIG += staticlib
CONFIG += exceptions
CONFIG -= rtti

!include(../../common.pri) {
    error(Could not find the common.pri file!)
}

DEFINES += HAVE_MEMCPY HAVE_STDARG_H HAVE_ZLIB
DEFINES += ADHOC_COMMANDS_TEST DISCO_ITEMS_TEST DISCO_INFO_TEST IQ_TEST MESSAGE_TEST GLOOX_TESTS PRESENCE_TEST SUBSCRIPTION_TEST VCARD_TEST UNIQUEMUCROOM_TEST SIMANAGER_TEST SEARCH_TEST

win32 {
HEADERS += config.h.win
# _MBCS
#DEFINES -= UNICODE _UNICODE
} else {
DEFINES += HAVE_UNISTD_H
}

HEADERS += \
    src/adhoc.h \
    src/adhoccommandprovider.h \
    src/adhochandler.h \
    src/adhocplugin.h \
    src/amp.h \
    src/annotations.h \
    src/annotationshandler.h \
    src/atomicrefcount.h \
    src/attention.h \
    src/base64.h \
    src/bookmarkhandler.h \
    src/bookmarkstorage.h \
    src/bytestream.h \
    src/bytestreamdatahandler.h \
    src/bytestreamhandler.h \
    src/capabilities.h \
    src/carbons.h \
    src/chatstate.h \
    src/chatstatefilter.h \
    src/chatstatehandler.h \
    src/client.h \
    src/clientbase.h \
    src/component.h \
    src/compressionbase.h \
    src/compressiondatahandler.h \
    src/compressiondefault.h \
    src/compressionzlib.h \
    src/config.h \
    src/connectionbase.h \
    src/connectionbosh.h \
    src/connectiondatahandler.h \
    src/connectionhandler.h \
    src/connectionhttpproxy.h \
    src/connectionlistener.h \
    src/connectionsocks5proxy.h \
    src/connectiontcpbase.h \
    src/connectiontcpclient.h \
    src/connectiontcpserver.h \
    src/connectiontls.h \
    src/connectiontlsserver.h \
    src/dataform.h \
    src/dataformfield.h \
    src/dataformfieldcontainer.h \
    src/dataformitem.h \
    src/dataformreported.h \
    src/delayeddelivery.h \
    src/disco.h \
    src/discohandler.h \
    src/disconodehandler.h \
    src/dns.h \
    src/error.h \
    src/event.h \
    src/eventdispatcher.h \
    src/eventhandler.h \
    src/featureneg.h \
    src/flexoff.h \
    src/flexoffhandler.h \
    src/forward.h \
    src/gloox.h \
    src/glooxversion.h \
    src/gpgencrypted.h \
    src/gpgsigned.h \
    src/inbandbytestream.h \
    src/instantmucroom.h \
    src/iodata.h \
    src/iq.h \
    src/iqhandler.h \
    src/jid.h \
    src/jinglecontent.h \
    src/jinglefiletransfer.h \
    src/jingleiceudp.h \
    src/jingleplugin.h \
    src/jinglepluginfactory.h \
    src/jinglesession.h \
    src/jinglesessionhandler.h \
    src/jinglesessionmanager.h \
    src/lastactivity.h \
    src/lastactivityhandler.h \
    src/linklocal.h \
    src/linklocalclient.h \
    src/linklocalhandler.h \
    src/linklocalmanager.h \
    src/loghandler.h \
    src/logsink.h \
    src/macros.h \
    src/md5.h \
    src/message.h \
    src/messageevent.h \
    src/messageeventfilter.h \
    src/messageeventhandler.h \
    src/messagefilter.h \
    src/messagehandler.h \
    src/messagesession.h \
    src/messagesessionhandler.h \
    src/mucinvitationhandler.h \
    src/mucmessagesession.h \
    src/mucroom.h \
    src/mucroomconfighandler.h \
    src/mucroomhandler.h \
    src/mutex.h \
    src/mutexguard.h \
    src/nickname.h \
    src/nonsaslauth.h \
    src/oob.h \
    src/parser.h \
    src/prep.h \
    src/presence.h \
    src/presencehandler.h \
    src/privacyitem.h \
    src/privacylisthandler.h \
    src/privacymanager.h \
    src/privatexml.h \
    src/privatexmlhandler.h \
    src/pubsub.h \
    src/pubsubevent.h \
    src/pubsubitem.h \
    src/pubsubmanager.h \
    src/pubsubresulthandler.h \
    src/receipt.h \
    src/registration.h \
    src/registrationhandler.h \
    src/resource.h \
    src/rosteritem.h \
    src/rosteritemdata.h \
    src/rosterlistener.h \
    src/rostermanager.h \
    src/search.h \
    src/searchhandler.h \
    src/sha.h \
    src/shim.h \
    src/sihandler.h \
    src/simanager.h \
    src/siprofileft.h \
    src/siprofilefthandler.h \
    src/siprofilehandler.h \
    src/socks5bytestream.h \
    src/socks5bytestreammanager.h \
    src/socks5bytestreamserver.h \
    src/softwareversion.h \
    src/stanza.h \
    src/stanzaextension.h \
    src/stanzaextensionfactory.h \
    src/statisticshandler.h \
    src/subscription.h \
    src/subscriptionhandler.h \
    src/tag.h \
    src/taghandler.h \
    src/tlsbase.h \
    src/tlsdefault.h \
    src/tlsgnutlsbase.h \
    src/tlsgnutlsclient.h \
    src/tlsgnutlsclientanon.h \
    src/tlsgnutlsserveranon.h \
    src/tlshandler.h \
    src/tlsopensslbase.h \
    src/tlsopensslclient.h \
    src/tlsopensslserver.h \
    src/tlsschannel.h \
    src/uniquemucroom.h \
    src/util.h \
    src/vcard.h \
    src/vcardhandler.h \
    src/vcardmanager.h \
    src/vcardupdate.h \
    src/xhtmlim.h \
    src/version.rc

SOURCES += \
    src/adhoc.cpp \
    src/amp.cpp \
    src/annotations.cpp \
    src/atomicrefcount.cpp \
    src/attention.cpp \
    src/base64.cpp \
    src/bookmarkstorage.cpp \
    src/capabilities.cpp \
    src/carbons.cpp \
    src/chatstate.cpp \
    src/chatstatefilter.cpp \
    src/client.cpp \
    src/clientbase.cpp \
    src/component.cpp \
    src/compressiondefault.cpp \
    src/compressionzlib.cpp \
    src/connectionbosh.cpp \
    src/connectionhttpproxy.cpp \
    src/connectionsocks5proxy.cpp \
    src/connectiontcpbase.cpp \
    src/connectiontcpclient.cpp \
    src/connectiontcpserver.cpp \
    src/connectiontls.cpp \
    src/connectiontlsserver.cpp \
    src/dataform.cpp \
    src/dataformfield.cpp \
    src/dataformfieldcontainer.cpp \
    src/dataformitem.cpp \
    src/dataformreported.cpp \
    src/delayeddelivery.cpp \
    src/disco.cpp \
    src/dns.cpp \
    src/error.cpp \
    src/eventdispatcher.cpp \
    src/featureneg.cpp \
    src/flexoff.cpp \
    src/forward.cpp \
    src/gloox.cpp \
    src/gpgencrypted.cpp \
    src/gpgsigned.cpp \
    src/inbandbytestream.cpp \
    src/instantmucroom.cpp \
    src/iodata.cpp \
    src/iq.cpp \
    src/jid.cpp \
    src/jinglecontent.cpp \
    src/jinglefiletransfer.cpp \
    src/jingleiceudp.cpp \
    src/jinglepluginfactory.cpp \
    src/jinglesession.cpp \
    src/jinglesessionmanager.cpp \
    src/lastactivity.cpp \
    src/linklocalclient.cpp \
    src/linklocalmanager.cpp \
    src/logsink.cpp \
    src/md5.cpp \
    src/message.cpp \
    src/messageevent.cpp \
    src/messageeventfilter.cpp \
    src/messagefilter.cpp \
    src/messagesession.cpp \
    src/mucinvitationhandler.cpp \
    src/mucmessagesession.cpp \
    src/mucroom.cpp \
    src/mutex.cpp \
    src/nickname.cpp \
    src/nonsaslauth.cpp \
    src/oob.cpp \
    src/parser.cpp \
    src/prep.cpp \
    src/presence.cpp \
    src/privacyitem.cpp \
    src/privacymanager.cpp \
    src/privatexml.cpp \
    src/pubsubevent.cpp \
    src/pubsubitem.cpp \
    src/pubsubmanager.cpp \
    src/receipt.cpp \
    src/registration.cpp \
    src/rosteritem.cpp \
    src/rostermanager.cpp \
    src/search.cpp \
    src/sha.cpp \
    src/shim.cpp \
    src/simanager.cpp \
    src/siprofileft.cpp \
    src/socks5bytestream.cpp \
    src/socks5bytestreammanager.cpp \
    src/socks5bytestreamserver.cpp \
    src/softwareversion.cpp \
    src/stanza.cpp \
    src/stanzaextensionfactory.cpp \
    src/subscription.cpp \
    src/tag.cpp \
    src/tlsdefault.cpp \
    src/tlsgnutlsbase.cpp \
    src/tlsgnutlsclient.cpp \
    src/tlsgnutlsclientanon.cpp \
    src/tlsgnutlsserveranon.cpp \
    src/tlsopensslbase.cpp \
    src/tlsopensslclient.cpp \
    src/tlsopensslserver.cpp \
    src/tlsschannel.cpp \
    src/uniquemucroom.cpp \
    src/util.cpp \
    src/vcard.cpp \
    src/vcardmanager.cpp \
    src/vcardupdate.cpp \
    src/xhtmlim.cpp

unix {
    target.path = /usr/lib
    INSTALLS += target
}
